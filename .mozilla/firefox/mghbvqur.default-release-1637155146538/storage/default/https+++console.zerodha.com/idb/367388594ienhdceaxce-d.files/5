(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92e04338"],{1552:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),t.job?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching your holdings"}})],1):t._e(),t._v(" "),!(t.holdings&&t.holdings.length>0)||t.job||t.fetchingData||t.holdingsError||t.sortingData?!t.holdings||0!==t.holdings.length||t.job||t.fetchingData||t.holdingsError?t.job||t.fetchingData||!t.holdingsError?t._e():a("div",{staticClass:"section"},[a("error",{attrs:{sub:t.holdingsErrorMsg}})],1):a("div",{staticClass:"section"},[a("empty",{attrs:{main:"",sub:"You do not hold any stocks approved for gifting."}})],1):a("div",{staticClass:"section gift-illustration"},[t._m(1),t._v(" "),t.showHoldings?a("div",{staticClass:"rec-card"},[a("p",[a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showHoldings=!1}}},[a("span",{staticClass:"icon icon-arrow-left"}),t._v("\n\t\t\t\t\tModify\n\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"rec-box"},[a("div",{staticClass:"row v-align"},[a("div",{class:{"seven columns":!0}},[a("p",{staticClass:"low-marg"},[a("strong",[t._v(t._s(t.giftRec.name))])]),t._v(" "),a("span",[t._v(t._s(t.giftRec.mobile))]),a("span",[t._v(t._s(t.giftRec.email))])]),t._v(" "),a("div",{class:{"five columns":!0,"text-right":!t.isMobileView}},[a("su-button",{staticClass:"btn btn-blue",attrs:{processing:t.sending,disabled:t.sending||0===t.checkedRows.length},nativeOn:{click:function(e){return e.preventDefault(),t.sendGift.apply(null,arguments)}}},[t._v("Confirm & send")])],1)]),t._v(" "),t.showHoldings?a("su-form",{attrs:{id:"gift_form"}},[a("h2",[t._v("Select the stocks to gift")]),t._v(" "),a("div",{staticClass:"selected-container"},[t.selectedHoldings.length?a("div",{staticClass:"row"},[a("div",{staticClass:"eight columns"},[a("label",[t._v("Selected stocks")]),a("br"),t._v(" "),t._l(t.selectedHoldings,(function(e,s){return a("span",{key:s},[t._v(t._s(e.tradingsymbol)+" ("+t._s(e.giftQty)+")"),s<t.selectedHoldings.length-1?a("span",[t._v(", ")]):t._e()])}))],2),t._v(" "),a("div",{class:{"four columns":!0,"text-right":!t.isMobileView}},[a("label",[t._v("Total approx. value")]),a("br"),t._v(" "),a("span",[t._v(t._s(t._f("inrFormat")(t.getTotalValue,2,null,!0)))])])]):t._e()]),t._v(" "),a("div",{staticClass:"table-container"},[a("table",{staticClass:"holdings-table",attrs:{id:"holdings_table"}},[a("thead",[a("tr",[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allChecked,expression:"allChecked"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allChecked)?t._i(t.allChecked,null)>-1:t.allChecked},on:{change:[function(e){var a=t.allChecked,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&(t.allChecked=a.concat([o])):r>-1&&(t.allChecked=a.slice(0,r).concat(a.slice(r+1)))}else t.allChecked=i},function(e){return t.selectAllOrders()}]}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{class:["table-border "+t.isSorted("tradingsymbol")],on:{click:function(e){return t.sortTable("tradingsymbol",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tSymbol\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("tradingsymbol")]})]),t._v(" "),a("td",{class:t.isSorted("quantity_available_gift"),on:{click:function(e){return t.sortTable("quantity_available_gift",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tAvailable qty.\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("quantity_available_gift")]})]),t._v(" "),a("td",{class:t.isSorted("close_price"),on:{click:function(e){return t.sortTable("close_price",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tPrev. close\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("close_price")]})]),t._v(" "),a("td",{class:t.isSorted("closing_value"),on:{click:function(e){return t.sortTable("closing_value",e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\tPresent value\n\t\t\t\t\t\t\t\t\t\t"),a("span",{class:["arrow "+t.getsortBy("closing_value")]})]),t._v(" "),a("td",[t._v("Gift qty.")])])]),t._v(" "),a("tbody",t._l(t.holdings,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"row-check table-border"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedRows,expression:"checkedRows"}],attrs:{type:"checkbox"},domProps:{value:e.isin,checked:Array.isArray(t.checkedRows)?t._i(t.checkedRows,e.isin)>-1:t.checkedRows},on:{change:function(a){var s=t.checkedRows,i=a.target,o=!!i.checked;if(Array.isArray(s)){var r=e.isin,n=t._i(s,r);i.checked?n<0&&(t.checkedRows=s.concat([r])):n>-1&&(t.checkedRows=s.slice(0,n).concat(s.slice(n+1)))}else t.checkedRows=o}}}),t._v(" "),a("span",{staticClass:"checkmark"})])]),t._v(" "),a("td",{staticClass:"textleft table-border"},[a("span",{staticClass:"symbol"},[t._v(t._s(e["tradingsymbol"]))])]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e["quantity_available_gift"])+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),0!==e["quantity_discrepant"]||null==e["close_price"]?a("td",{staticClass:"text-light-grey"},[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["close_price"],2)))]),t._v(" "),null==e["closing_value"]?a("td",[t._v(" – ")]):a("td",[t._v(t._s(t._f("inrFormat")(e["closing_value"],2)))]),t._v(" "),a("td",[a("su-input",{attrs:{type:"number",disabled:-1===t.checkedRows.indexOf(e.isin),max:parseFloat(e.quantity_available_gift),min:1,required:!0},model:{value:e.giftQty,callback:function(a){t.$set(e,"giftQty",a)},expression:"holding_item.giftQty"}})],1)])})),0)])])]):t._e()],1)]):a("div",{staticClass:"inputcontainer"},[a("div",{staticClass:"rec-box"},[a("div",{staticClass:"row v-align"},[t._m(2),t._v(" "),a("div",{class:{"six columns":!0,"text-right":!t.isMobileView}},[a("span",{staticClass:"text-light-grey text-small"},[t._v("Select stocks in the next step")])])]),t._v(" "),a("su-form",{attrs:{id:"rec_form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"three columns gift-inputs"},[a("su-input",{attrs:{type:"text",maxlength:40,"dynamic-label":"","no-error":"",placeholder:"Recipient's name",label:"Recipient's name",required:!0},model:{value:t.giftRec.name,callback:function(e){t.$set(t.giftRec,"name",e)},expression:"giftRec.name"}})],1),t._v(" "),a("div",{staticClass:"three columns gift-inputs gift-mobile"},[a("span",{staticClass:"pre-mobile"},[t._v("+91")]),t._v(" "),a("su-input",{attrs:{type:"number","dynamic-label":"","no-error":"",placeholder:"Recipient's mobile",label:"Recipient's mobile",required:!0},model:{value:t.giftRec.mobile,callback:function(e){t.$set(t.giftRec,"mobile",e)},expression:"giftRec.mobile"}})],1),t._v(" "),a("div",{staticClass:"four columns"},[a("su-input",{attrs:{type:"text",maxlength:50,"dynamic-label":"","no-error":"",placeholder:"Recipient's e-mail (Optional)",label:"Recipient's e-mail (Optional)"},model:{value:t.giftRec.email,callback:function(e){t.$set(t.giftRec,"email",e)},expression:"giftRec.email"}})],1),t._v(" "),a("div",{staticClass:"two columns"},[a("label",[t._v(" ")]),a("br"),t._v(" "),a("su-button",{staticClass:"btn-blue",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.showHoldingsBlock()}}},[t._v("Continue")])],1)])])],1)])]),t._v(" "),a("div",{staticClass:"section",attrs:{id:"approval"}},[t.fetchingData||t.job||t.fetchingHistory?t._e():a("div",{staticClass:"gift-history table-container"},[a("h3",{on:{click:function(e){t.showHistory=!t.showHistory}}},[a("img",{staticClass:"recent-icon",attrs:{src:"/static/images/clock-dark.svg"}}),t._v("\n\t\t\t\tHistory\n\t\t\t\t"),t.fetchingHistory?a("su-loader"):t._e(),t._v(" "),t.history&&t.history.length>0?a("span",{class:{icon:!0,"icon-chevron-down":!t.showHistory,"icon-chevron-up":t.showHistory}}):t._e()],1),t._v(" "),a("hr"),t._v(" "),t.showHistory?a("div",[a("input",{attrs:{id:"gift_link",type:"text",value:""}}),t._v(" "),t.history&&t.history.length>0?a("table",{staticClass:"history-table"},[t._m(3),t._v(" "),a("tbody",t._l(t.history,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.receiver_fullname)+"\n\t\t\t\t\t\t\t\t"),"ACCEPTED"===e.status.toUpperCase()?a("div",[a("span",{staticClass:"text-light-grey text-small"},[t._v("Claimed by "+t._s(e.claimer_fullname)+" ("+t._s(e.claimed_by)+")")])]):t._e(),t._v(" "),"CREATED"===e.status.toUpperCase()?a("div",[a("a",{staticClass:"text-small",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.copyLink(e.name)}}},[a("span",{staticClass:"icon icon-copy"}),t._v("\n\t\t\t\t\t\t\t\t\t\tCopy gift link\n\t\t\t\t\t\t\t\t\t")])]):t._e()]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.receiver_phone_number))]),t._v(" "),a("td",{staticClass:"text-left"},[t._v(t._s(e.creation))]),t._v(" "),a("td",{staticClass:"text-left"},t._l(e.stocks,(function(s,i){return a("span",{key:i},[t._v(t._s(s.symbol)+" ("+t._s(s.qty)+")"),i<e.stocks.length-1?a("span",[t._v(", ")]):t._e()])})),0),t._v(" "),a("td",{staticClass:"text-left"},["ACCEPTED"!==e.status.toUpperCase()?a("div",{staticClass:"gift-status"},[-1!==e.status.toUpperCase().indexOf("TRANSFERRED")?a("span",{staticClass:"status transferred"},[t._v(t._s(e.status))]):a("span",{class:["status "+e.status.toLowerCase()]},[t._v(t._s(e.status))])]):a("div",{staticClass:"gift-status"},[a("su-button",{staticClass:"btn btn-blue",nativeOn:{click:function(a){return a.preventDefault(),t.showConfirmModal(e.name,"approve",e.claimer_fullname,e.claimed_by)}}},[t._v("Approve")])],1),t._v(" "),"CREATED"!==e.status.toUpperCase()&&("ACCEPTED"!==e.status.toUpperCase()||t.deleting&&t.delItem===e.name)?t._e():a("a",{staticClass:"text-small",attrs:{href:""},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.showConfirmModal(e.name,"delete")}}},[t._v("Cancel")])])])})),0)]):t._e()]):t._e(),t._v(" "),t.history&&0===t.history.length?a("p",{staticClass:"text-light-grey"},[a("span",{staticClass:"icon icon-info"}),t._v(" No gifts sent.")]):t._e()])]),t._v(" "),t.showConfirm?a("div",{staticClass:"section"},[a("div",{staticClass:"modal-mask cancel-pledge-modal"},[a("div",{staticClass:"modal-wrapper",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-container",on:{click:function(e){return e.stopPropagation(),t.showConfirmModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-body"},[a("span",{staticClass:"close-modal",on:{click:function(e){return e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[a("img",{attrs:{src:"/static/images/close.svg",alt:"x"}})]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.confirmMsg))]),t._v(" "),""!==t.delItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.deleting,disabled:t.deleting},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRequest.apply(null,arguments)}}},[t._v("Confirm")]):""!==t.approveItem?a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",processing:t.approving,disabled:t.approving},nativeOn:{click:function(e){return e.preventDefault(),t.approveGift.apply(null,arguments)}}},[t._v("Confirm")]):t._e(),t._v(" "),a("su-button",{staticClass:"btn-grey btn-outline",attrs:{type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.hideConfirmModal.apply(null,arguments)}}},[t._v("Cancel")])],1)])])])])]):t._e()])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tGift stocks\n\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row v-align"},[a("div",{staticClass:"five columns text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}})]),t._v(" "),a("div",{staticClass:"seven columns"},[a("h2",[t._v("Gift your favourite stocks and ETFs to your friends and family")]),t._v(" "),a("ul",{staticClass:"text-grey"},[a("li",[t._v("Select instruments from your portfolio you wish to gift. "),a("a",{attrs:{target:"_blank",href:"https://docs.google.com/spreadsheets/d/12D5MnLDav3AVxSY84nc1aavaYg9kbLkRyZvq7aJ-DCM/edit#gid=40865646"}},[t._v("View list of approved securities")]),t._v(".")]),t._v(" "),a("li",[t._v("We notify the recipient. They log into their Zerodha account to accept the gift.")]),t._v(" "),a("li",[t._v("If they don’t have an account, they can sign up and then accept the gift later.")]),t._v(" "),a("li",[t._v("We notify you of the acceptance and you authorize moving securities to the recipient’s demat. "),a("a",{attrs:{href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/gift-shares"}},[t._v("Learn more")]),t._v(".")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"six columns"},[a("h2",[t._v("Send a gift")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",{staticClass:"text-left"},[t._v("Recipient name")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Recipient mobile")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Created on")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Stocks gifted")]),t._v(" "),a("td",{staticClass:"text-left"},[t._v("Status")])])])}],o=a("02bc"),r=a("2e34"),n=a("5dfe"),l=a("3fb9"),c=a("2f62"),d=a("ba6a"),p=a("5665");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h=[];function m(t,e){return t+"?date="+e}function v(t){var e=t,a=""+(e.getMonth()+1),s=""+e.getDate(),i=e.getFullYear();return a.length<2&&(a="0"+a),s.length<2&&(s="0"+s),[i,a,s].join("-")}var _={data:function(){return{showHoldings:!1,job:!1,params:{},holdings:[],date:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),format:"YYYY-MM-DD",sortKey:"tradingsymbol",sortBy:"asc",segment:"EQ",disabled:{to:new Date(2017,3,1)},timeout:"",noResults:!1,fetchingData:!1,sortingData:!1,searchQuery:"",lastUpdated:{},holdingsError:!1,holdingsErrorMsg:"Please try again",firstPoll:!0,checkedRows:[],selectedHoldings:[],allChecked:!1,sending:!1,giftRec:{name:"",mobile:"",email:""},showHistory:!0,history:{},fetchingHistory:!1,deleting:!1,delItem:"",approving:!1,approveItem:"",showConfirm:!1,confirmMsg:""}},created:function(){var t=document.createElement("script");t.setAttribute("src","https://kite.trade/publisher.js?v=3"),document.head.appendChild(t)},mounted:function(){this.getHoldingsData(this.date,this.segment),this.getHistory(),-1!==document.location.href.indexOf("#approval")&&(this.showHistory=!0);var t=this;window.addEventListener("keyup",(function(e){27===e.keyCode&&t.hideConfirmModal()}))},computed:u(u({},Object(c["c"])(["isMobileView"])),{},{getTotalValue:function(){if(this.selectedHoldings.length){var t=0;for(var e in this.selectedHoldings)this.selectedHoldings[e].close_price&&(t+=this.selectedHoldings[e].giftQty*this.selectedHoldings[e].close_price);return t}}}),watch:{checkedRows:function(t){t&&t.length?this.selectedHoldings=this.holdings.filter((function(e){return-1!==t.indexOf(e.isin)})):this.selectedHoldings=[]}},methods:{copyLink:function(t){document.getElementById("gift_link").value="https://console.zerodha.com/gift/accept/"+t,document.getElementById("gift_link").setAttribute("value","https://console.zerodha.com/gift/accept/"+t),document.getElementById("gift_link").select(),document.execCommand("copy"),document.getElementById("gift_link").value="",document.getElementById("gift_link").setAttribute("value",""),this.$toast.success({message:"Gift link copied to clipboard.",orientation:this.$toast.TOP_RIGHT,duration:6e3})},showConfirmModal:function(t,e,a,s){var i=this;"delete"===e?(this.confirmMsg="Delete this request?",this.delItem=t):"approve"===e&&(this.confirmMsg="Your gift has been claimed by "+a+" ("+s+"). Approve this request?",this.approveItem=t),this.$nextTick((function(){i.showConfirm=!0}))},hideConfirmModal:function(){this.delItem="",this.approveItem="",this.approving=!1,this.deleting=!1,this.showConfirm=!1},selectAllOrders:function(){if(this.checkedRows=[],this.allChecked)for(var t=0;t<this.holdings.length;t++)this.checkedRows.push(this.holdings[t].isin)},isSorted:function(t){return t===this.sortKey?" sorted":""},getsortBy:function(t){return t===this.sortKey?"arrow-show arrow "+this.sortBy:"asc"},sortTable:function(t,e){if(h=[],t===this.sortKey)if("asc"===this.sortBy){this.sortBy="desc";for(var a=document.getElementById("holdings_table").querySelectorAll("thead td span"),s=0;s<a.length;s++)a[s].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow desc":e.target.className="arrow desc"}else{this.sortBy="asc";for(var i=document.getElementById("holdings_table").querySelectorAll("thead td span"),o=0;o<i.length;o++)i[o].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc"}else{this.sortKey=t,this.sortBy="asc";for(var r=document.getElementById("holdings_table").querySelectorAll("thead td span"),n=0;n<r.length;n++)r[n].className="arrow asc";e.target.querySelector("span")?e.target.querySelector("span").className="arrow asc":e.target.className="arrow asc",this.params.page=1}this.sortingData=!0,this.getHoldingsData(this.params.date,this.params.segment,this.sortKey,this.sortBy,!0)},compare:function(t,e){return"tradingsymbol"===this.sortKey?t[this.sortKey]<e[this.sortKey]?"desc"===this.sortBy?1:-1:t[this.sortKey]>e[this.sortKey]?"desc"===this.sortBy?-1:1:0:null===t[this.sortKey]?1:null===e[this.sortKey]?-1:parseFloat(t[this.sortKey])<parseFloat(e[this.sortKey])?"desc"===this.sortBy?1:-1:parseFloat(t[this.sortKey])>parseFloat(e[this.sortKey])?"desc"===this.sortBy?-1:1:0},pollData:function(){var t=this;this.firstPoll?setTimeout((function(){return t.getHoldingsData(t.date)}),500):setTimeout((function(){return t.getHoldingsData(t.date)}),2e3),this.firstPoll=!1},getHoldingsData:function(t,e,a,s,i,o){var r=this;if(this.holdingsError=!1,this.noResults=!1,i||o||(this.fetchingData=!0),o&&(this.sortingData=!0),i)return h=this.holdings,h.sort(this.compare),void this.$nextTick((function(){r.sortingData=!1}));var n=m(p["a"].getHoldings,v(this.date));this.job=!0,d["a"].request("GET",!0,n,null,(function(t,e){if("PENDING"===t.toUpperCase())r.pollData();else if("SUCCESS"===t.toUpperCase()){r.firstPoll=!0,r.params={date:r.date},r.holdings=[];var a=[],s=e.data.data.result;for(var n in s)for(var l=s[n],c=0;c<l.length;c++){var p=l[c];p["row"]=c,a.push(p)}for(var g=a.length-1;g>=0;g--){var u=parseFloat(a[g]["quantity_available"])+parseFloat(a[g]["quantity_pledged_for_loan"])+parseFloat(a[g]["quantity_pledged_for_margin"]);a[g]["quantity_available_gift"]=a[g]["quantity_available"]-a[g]["quantity_t1"],a[g]["quantity_available_gift"]<1?a.splice(g,1):isNaN(u)?a[g]["qty_total"]=0:(parseFloat(u)%1!==0&&(u=parseFloat(u).toFixed(3)),a[g]["qty_total"]=u)}if(r.sortingData=!1,i||o||r.getApprovedStocks(a),0===r.holdings.length?r.noResults=!0:r.noResults=!1,document.getElementById("holdings_table"))for(var f=document.getElementById("holdings_table").querySelectorAll("tbody tr"),h=0;h<f.length;h++)f[h].className="";r.sortingData=!1}else"FAILURE"===t.toUpperCase()?(r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.firstPoll=!0,r.holdingsError=!0,r.$toast.error({message:"Error fetching holdings: "+e.data.message,orientation:r.$toast.TOP_RIGHT,duration:6e3})):"UNDEFINED"===t.toUpperCase()&&(r.job=!1,r.fetchingData=!1,r.sortingData=!1,r.$toast.error({message:"Error fetching holdings:"+d["a"].errorMessage(),orientation:r.$toast.TOP_RIGHT,duration:6e3}))}))},searchFilter:function(){this.searchQuery.trim().length>0?-1===this.selectedFilters.indexOf("")&&this.selectedFilters.push(""):-1!==this.selectedFilters.indexOf("")&&this.selectedFilters.splice(this.selectedFilters.indexOf(""),1)},showHoldingsBlock:function(){document.getElementById("rec_form")&&document.getElementById("rec_form").reportValidity()&&(this.showHoldings=!0)},hideHoldingsBlock:function(){this.showHoldings=!1,this.giftRec={name:"",mobile:"",email:""}},sendGift:function(){var t=this;if(document.getElementById("gift_form")&&document.getElementById("gift_form").reportValidity()){this.sending=!0;var e=[],a=function(a){var s=t.holdings.find((function(e){return e.isin===t.checkedRows[a]}));e.push({isin:s.isin,instrument_id:s.instrument_id,quantity:parseFloat(s.giftQty),quantity_available:parseFloat(s.quantity_available_gift)})};for(var s in this.checkedRows)a(s);var i={name:this.giftRec.name,mobile:this.giftRec.mobile,email:this.giftRec.email,gift_items:e};d["a"].request("POST",!1,p["a"].sendGift,i,(function(e,a){t.sending=!1,"SUCCESS"===e.toUpperCase()?(t.hideHoldingsBlock(),t.checkedRows=[],t.getHistory(),t.$toast.success({message:"Gift notification sent to the recipient. Awaiting confirmation.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error sending gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error sending gift:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},getApprovedStocks:function(t){var e=this;this.fetchingData=!0,d["a"].request("GET",!1,p["a"].getApprovedStocks,null,(function(a,s){if(e.sending=!1,e.fetchingData=!1,e.job=!1,e.sortingData=!1,"SUCCESS"===a.toUpperCase())for(var i=s.data.data.result,o=0;o<t.length;o++){t[o]["giftQty"]=parseFloat(t[o]["qty_total"]);for(var r=0;r<i.length;r++)t[o].isin===i[r].isin.trim()&&e.holdings.push(t[o])}else"FAILURE"===a.toUpperCase()?e.$toast.error({message:"Error fetching approved stocks: "+s.data.message,orientation:e.$toast.TOP_RIGHT,duration:6e3}):e.$toast.error({message:"Error fetching approved stocks:"+d["a"].errorMessage(),orientation:e.$toast.TOP_RIGHT,duration:6e3})}))},getHistory:function(){var t=this;this.fetchingHistory=!0,d["a"].request("GET",!1,p["a"].getGiftHistory,null,(function(e,a){if(t.fetchingHistory=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result,i={},o=[],r=[],n=[],l=[],c=[],p=[],g=[];for(var u in t.history=[],s)i.hasOwnProperty(s[u].name)||(i[s[u].name]=s[u],i[s[u].name]["stocks"]=[]),i[s[u].name]["stocks"].push({symbol:s[u].tradingsymbol,qty:s[u].quantity});for(var f in i)"ACCEPTED"===i[f].status.toUpperCase()?o.push(i[f]):"CREATED"===i[f].status.toUpperCase()?r.push(i[f]):"APPROVED"===i[f].status.toUpperCase()?n.push(i[f]):"PROCESSING"===i[f].status.toUpperCase()?l.push(i[f]):-1!==i[f].status.toUpperCase().indexOf("TRANSFERRED")?c.push(i[f]):"FAILED"===i[f].status.toUpperCase()?p.push(i[f]):"CANCELED"===i[f].status.toUpperCase()&&g.push(i[f]);t.history=o.concat(r,n,l,c,p,g),document.getElementById("approval")&&-1!==document.location.href.indexOf("#approval")&&document.getElementById("approval").scrollIntoView({behavior:"smooth"})}else"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error fetching gift history: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error fetching gift history:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},deleteRequest:function(){var t=this;this.deleting=!0,d["a"].request("POST",!1,p["a"].cancelGift,{gift_id:this.delItem},(function(e,a){t.deleting=!1,"SUCCESS"===e.toUpperCase()?(t.getHistory(),t.hideConfirmModal(),t.$toast.success({message:"Gift request deleted",orientation:t.$toast.TOP_RIGHT,duration:6e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error deleting gift request: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error deleting gift request:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))},approveGift:function(){var t=this;this.approving=!0,d["a"].request("POST",!1,p["a"].authoriseGift,{gift_id:this.approveItem},(function(e,a){"SUCCESS"===e.toUpperCase()?(t.approving=!1,console.log("success")):"FAILURE"===e.toUpperCase()?428===a.status&&a.data.message?(t.invokeCDSL(a.data.message,t.approveItem),t.hideConfirmModal()):(t.approving=!1,t.$toast.error({message:"Error approving gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.approving=!1,t.$toast.error({message:"Error approving gift:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},invokeCDSL:function(t,e){var a=this;try{KiteConnect.ready((function(){var s=new KiteConnect("console");s.authHoldings(t,(function(){var s=this;d["a"].request("POST",!1,p["a"].approveGift,{gift_id:e,request_id:t},(function(t,e){a.approving=!1,"SUCCESS"===t.toUpperCase()?(a.getHistory(),a.$toast.success({message:"Gift approved",orientation:a.$toast.TOP_RIGHT,duration:6e3})):s.$toast.error({message:"Error approving gift:"+d["a"].errorMessage(),orientation:s.$toast.TOP_RIGHT,duration:6e3})}))}))}))}catch(s){this.$toast.error({message:"Something went wrong. Please try again.",orientation:this.$toast.TOP_RIGHT,duration:6e3})}}},components:{jobber:r["a"],"su-button":n["a"],empty:o["a"],error:l["a"]}},y=_,C=a("2877"),b=Object(C["a"])(y,s,i,!1,null,null,null);e["default"]=b.exports},"1bef":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container holdings gift"},[t._m(0),t._v(" "),a("hr",{staticClass:"header-hr"}),t._v(" "),t.fetchingData?a("div",{staticClass:"section text-center"},[a("jobber",{attrs:{main:"Fetching gift details",sub:""}})],1):t._e(),t._v(" "),!t.fetchingData&&t.holdingsError?a("div",{staticClass:"section"},[a("error",{attrs:{main:t.holdingsErrorMsg,sub:""}})],1):t._e(),t._v(" "),t.fetchingData||t.holdingsError||!t.giftDetails[t.giftID]?t._e():a("div",{staticClass:"section accept-head"},[a("div",{staticClass:"gift-illustration text-center"},[a("img",{attrs:{src:"/static/images/gift.png"}}),t._v(" "),a("h3",[t._v("\n\t\t\t\t"+t._s(t.giftDetails[t.giftID].sender_fullname)+" ("+t._s(t.giftDetails[t.giftID].gifted_by)+") has sent you "+t._s(t.giftDetails[t.giftID].stocks.length)+" stock"),t.giftDetails[t.giftID].stocks.length>1?a("span",[t._v("s")]):t._e(),t._v(" as gift.\n\t\t\t")]),t._v(" "),a("div",{staticClass:"gift-history table-container accept-table"},[a("table",{staticClass:"history-table"},[t._m(1),t._v(" "),a("tbody",t._l(t.giftDetails[t.giftID].stocks,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left table-border"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.symbol)+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("td",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.qty)+"\n\t\t\t\t\t\t\t")])])})),0)]),a("br")]),t._v(" "),"accepted"===t.giftDetails[t.giftID].status.toLowerCase()||t.accepted?a("p",[a("span",{staticClass:"icon icon-check"}),t._v("\n\t\t\t\tYou have accepted this gift.\n\t\t\t")]):a("div",[a("su-button",{staticClass:"btn-blue",attrs:{type:"submit",disabled:t.accepting,processing:t.accepting},nativeOn:{click:function(e){return e.preventDefault(),t.accept.apply(null,arguments)}}},[t._v("Accept gift")])],1),t._v(" "),t._m(2)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[a("img",{staticClass:"gift-head-icon",attrs:{src:"/static/images/gift.svg"}}),t._v("\n\t\tAccept gift\n\t")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"grey-back"},[a("tr",[a("td",{staticClass:"text-left table-border"},[t._v("Stock")]),t._v(" "),a("td",[t._v("Qty.")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-light-grey text-small"},[t._v("Once you accept, the sender has to transfer the stocks to your demat. "),a("a",{attrs:{href:"https://support.zerodha.com/category/your-zerodha-account/transfer-of-shares-and-conversion-of-shares/articles/receive-gifted-shares"}},[t._v("Learn more")]),t._v(".")])}],o=a("02bc"),r=a("2e34"),n=a("5dfe"),l=a("3fb9"),c=a("2f62"),d=a("ba6a"),p=a("5665");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={data:function(){return{fetchingData:!1,holdingsError:!1,holdingsErrorMsg:"Please try again",giftID:"",giftDetails:{},accepting:!1,accepted:!1}},mounted:function(){this.getGiftDetails()},computed:u({},Object(c["c"])(["isMobileView"])),methods:{getGiftDetails:function(){var t=this;this.giftID=encodeURIComponent(this.$route.params.giftID),this.fetchingData=!0,d["a"].request("GET",!1,p["a"].getGiftDetails+"?gift_id="+this.giftID,null,(function(e,a){if(t.fetchingData=!1,"SUCCESS"===e.toUpperCase()){var s=a.data.data.result;for(var i in t.giftDetails={},s)t.giftDetails.hasOwnProperty(s[i].name)||(t.giftDetails[s[i].name]=s[i],t.giftDetails[s[i].name]["stocks"]=[]),t.giftDetails[s[i].name]["stocks"].push({symbol:s[i].trading_symbol,qty:s[i].quantity})}else"FAILURE"===e.toUpperCase()?(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3})):(t.holdingsError=!0,t.$toast.error({message:"Error fetching gift details:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3}))}))},accept:function(){var t=this;this.accepting=!0,d["a"].request("POST",!1,p["a"].claimGift,{gift_id:this.giftID,gifted_by:this.giftDetails[this.giftID].gifted_by},(function(e,a){t.accepting=!1,"SUCCESS"===e.toUpperCase()?(t.accepted=!0,t.$toast.success({message:"You've accepted the gift. Waiting for the sender to complete the demat transfer.",orientation:t.$toast.TOP_RIGHT,duration:8e3})):"FAILURE"===e.toUpperCase()?t.$toast.error({message:"Error accepting gift: "+a.data.message,orientation:t.$toast.TOP_RIGHT,duration:6e3}):t.$toast.error({message:"Error accepting gift:"+d["a"].errorMessage(),orientation:t.$toast.TOP_RIGHT,duration:6e3})}))}},components:{jobber:r["a"],"su-button":n["a"],empty:o["a"],error:l["a"]}},m=h,v=a("2877"),_=Object(v["a"])(m,s,i,!1,null,null,null);e["default"]=_.exports},5665:function(t,e,a){"use strict";var s={login:"kite/login",getStatus:"/api/user/status",getSegmentStatus:"/api/user_profile/status",getHoldings:"/api/reports/holdings/portfolio",getHoldingsBreakdown:"/api/reports/holdings/breakdown",getHoldingsDividends:"/api/reports/holdings/dividends_breakdown",getDiscrepants:"/api/external_holdings",getExternalTrades:"/api/external_trades",getPositions:"/api/reports/positions",getPositionsBreakdown:"/api/reports/positions/breakdown",downloadHoldings:"/api/download/holdings/portfolio",downloadPositions:"/api/download/positions",getKiteHoldings:"/api/holdings/kite",getPositionsExposure:"/api/reports/positions/exposure",placePledgeRequest:"/api/pledge/create",cancelPledgeRequest:"/api/pledge/cancel",getPledgeHaircut:"/api/pledge/haircut",getPledgeHistory:"/api/pledge/active",getYesBankQty:"/api/user/yb_block",getDashboardData:"/api/dashboard",getAccountValues:"/api/dashboard/account_values",getOrders:"/api/orders",getTags:"/api/tags",getHoldingsTags:"/api/tags/holdings",getPendingTags:"/api/tags/queue",createTag:"/api/tags/create",tagOrder:"/api/tags/tag_order",editTag:"/api/tags/update",deleteTag:"/api/tags/delete",getTagAnalytics:"/api/tags/analytics",getPNL:"/api/reports/pnl",getPNLHeatmap:"/api/reports/pnl/heatmap",getPNLCharges:"/api/reports/pnl/charges",getPNLSummary:"/api/reports/pnl/summary",getPNLBreakdown:"/api/reports/pnl/breakdown",downloadPNL:"/api/download/pnl",getTrades:"/api/reports/tradebook",getTradesHeatmap:"/api/reports/tradebook/heatmap",downloadTrades:"/api/download/tradebook",getFunds:"/api/funds/balance",getFundBalance:"/api/funds/balance/withdrawable",getFundAvailable:"/api/funds/balance/available",getFundHistory:"/api/funds/history",submitFund:"/api/funds",nextTradeDate:"/api/funds/next_payout_time",lastUpdated:"/api/funds/last_updated_time",getQuarterlySettlementDates:"/api/user/qs_date",downloadInterest:"/api/funds/interest_statement",getLedger:"/api/ledger",downloadLedger:"/api/download/ledger",getProfile:"/api/user_profile",getProfileSchema:"/api/user_profile/schema",deactivateSegment:"/api/user_profile/segment/deactivate",getProfileSchemaStatus:"/api/user_profile/schema/status",getSLB:"/api/user_profile/slb",postMCX:"/api/user_profile/mcx_classification",getVPA:"/api/user/vpa",getZPIN:"/api/support_code",postBankProof:"/api/upload/bank_proof",createOTP:"/api/otp/create",verifyOTP:"/api/otp/verify",sendOTP:"/api/otp/send",getUserDocuments:"/api/user/user_proofs",emailDocuments:"/api/user/email_document",updateCMR:"/api/user/update_cmr",postProfileSchemaOTP:"/api/user_profile/schema/otp_verified",pincode:"/api/pincode",getEsignStatus:"/api/esign/status",getIPO:"/api/ipo",getIPOBids:"/api/ipo/bids",createIPOBid:"/api/ipo/bids/create",updateIPOBid:"/api/ipo/bids/update",cancelIPOBid:"/api/ipo/bids/cancel",getIPOArchive:"/api/ipo/bids/archive",getReferralPoints:"/api/referral/points",getSubscriptions:"/api/referral/offers",getReferLedger:"/api/referral/ledger",getReferrals:"/api/referred",redeemReferral:"/api/referral/redeem",postReferral:"/api/refer",withdrawReferral:"/api/refer/withdraw",walletInfo:"/api/refer/payout/info",getCAOrders:"/api/ca_orders",getCAOrderWindows:"/api/ca_order_windows",postCAOrder:"/api/ca_order",cancelCAOrder:"/api/ca_order/cancel",getTaxPNLData:"/api/reports/taxpnl",downloadTaxPNL:"/api/download/taxpnl",getTaxloss:"/api/reports/taxloss_harvesting",getMandates:"/api/mandate",createMandate:"/api/mandate/schedule",deleteMandate:"/api/mandate/delete",getMandateURL:"/api/mandate/redirect",cancelMandate:"/api/mandate/cancel",sendGift:"/api/gift",claimGift:"/api/gift/claim",cancelGift:"/api/gift/cancel",approveGift:"/api/gift/approve",authoriseGift:"/api/gift/authorise",getGiftHistory:"/api/gift/history",getApprovedStocks:"api/gift/approved/isins",getGiftDetails:"/api/gift/gift_id",getChallenges:"/api/challenge",calculateChallenge:"/api/challenge/calculate",createChallenge:"/api/challenge/create",downloadCertificate:"/api/download/challenge_certificate",calculateChallengeID:"/api/challenge/calculate_id",emailContractnote:"/api/download/async_contract_note",downloadContractnote:"/api/download/s3_contract_note",downloadSignedContractnote:"/api/download/contract_note",downloadELSS:"/api/download/elss"};e["a"]=s},ba6a:function(t,e,a){"use strict";var s=a("bc3a"),i=a.n(s),o=a("5665"),r={errorMessage:function(){return" Service unavailable. Please try after sometime."},getCookie:function(t){var e=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var i=a[s].trim();if(i.substring(0,t.length+1)===t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e},checkAuth:function(t){if(t.response&&403===t.response.status){var e=o["a"].login;"/"!==window.location.pathname&&(e+="?next_url="+encodeURIComponent(window.location.pathname)),window.location.href=e}},request:function(t,e,a,s,o,r){var n=this,l=i.a.create({timeout:1e4,responseType:"json"});l.interceptors.request.use((function(t){return t.headers["X-CSRFTOKEN"]=n.getCookie("public_token"),t}));var c={headers:{}};"GET"===t.toUpperCase()?e?l.get(a,c).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()?"SUCCESS"===t.data.data.state.toUpperCase()?o("success",t):"PENDING"===t.data.data.state.toUpperCase()||"RECEIVED"===t.data.data.state.toUpperCase()||"STARTED"===t.data.data.state.toUpperCase()?o("pending"):"FAILURE"===t.data.data.state.toUpperCase()?o("failure",t):o("undefined",t):o("undefined",t)})).catch((function(t){console.log(t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined",t.response)})):l.get(a,c).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()&&"SUCCESS"===t.data.data.state.toUpperCase()?o("success",t):o("failure",t)})).catch((function(t){console.log("catch",t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined")})):(c.headers["Content-Type"]=r?"multipart/form-data":"application/json",e?"POST"===t.toUpperCase()&&l.post(a,s,c).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()?"SUCCESS"===t.data.data.state.toUpperCase()?o("success",t):"PENDING"===t.data.data.state.toUpperCase()||"RECEIVED"===t.data.data.state.toUpperCase()||"STARTED"===t.data.data.state.toUpperCase()?o("pending"):"FAILURE"===t.data.data.state.toUpperCase()?o("failure",t):o("undefined",t):o("undefined",t)})).catch((function(t){console.log(t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined",t.response)})):"POST"===t.toUpperCase()?l.post(a,s,c).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()?o("success",t):o("failure",t)})).catch((function(t){console.log(t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined")})):"PUT"===t.toUpperCase()?l.put(a,s,c).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()?o("success",t):o("failure",t)})).catch((function(t){console.log(t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined")})):"DELETE"===t.toUpperCase()&&l.delete(a,{headersObj:c,data:s}).then((function(t){t&&t.data&&"SUCCESS"===t.data.status.toUpperCase()?o("success",t):o("failure",t)})).catch((function(t){console.log(t),t.code&&"ECONNABORTED"===t.code&&o("failure",{data:{message:"Request timed out."}}),n.checkAuth(t),t&&t.response?o("failure",t.response):o("undefined")})))}};e["a"]=r}}]);